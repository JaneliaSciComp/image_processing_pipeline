{% extends "branding.html" %}
{% block content %}
  <div class="row lightsheet-row">
    <select class="form-control select-job" onchange="location = this.options[this.selectedIndex].value;">
      <option value="http://10.36.13.18:5000/" selected>---Select Previous Run---</option>
      {% if parentServiceData is not none %}
        {% for service in parentServiceData %}
          <option value={{"http://10.36.13.18:5000/"+ service.index }} {{ service.selected }}>  {{ service.creationDate + " " + "(" + service.args[3] + ")"}} </option> 
        {% endfor %}
      {% endif %}
    </select>
  </div>
  <div class="row lightsheet-row">
    <div id="steps">
      {% if pipelineSteps is not none %}
        {% for pipelineStep in pipelineSteps %}
          <div class="card">
            <div class="card-header" id="headingOne">
              <h5 class="mb-0">
                <button class="btn btn-link step-name" data-toggle="collapse" data-target="#collapse{{ loop.index }}" aria-expanded="false" aria-controls="collapse{{loop.index }}">
                  <input type="checkbox" value={{ pipelineStep.stepName }}+"_checkbox" {{ pipelineStep.checkboxState }}>
                  {{ pipelineStep.stepDescription }}
                </button>
              </h5>
            </div>
            <div id="collapse{{ loop.index }}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
              <div class="card-body">
                <ul class="nav nav-tabs" role="tablist">
                  <li class="nav-item tab-frequent">
                    <a class="nav-link active" href="#frequent{{ loop.index }}" role="tab" data-toggle="tab">Frequent</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#sometimes{{ loop.index }}" role="tab" data-toggle="tab">Sometimes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#rare{{ loop.index }}" role="tab" data-toggle="tab">Rare</a>
                  </li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane active lightsheet-tab" id="frequent{{ loop.index }}">
                    {% if loop.first %}
                        {% if config.onenum is not none %}
                          {% for item in config.onenum %}
                            <div class="input-group input-group-sm mb-3" id="{{ item.name }}">
                              <div class="input-group-prepend">
                                <span class="input-group-text lightsheet-input">{{ item.name }}</span>
                              </div>
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number1 }}">
                            </div>
                          {% endfor %}
                        {% endif %}
                        {% if config.twonum is not none %}
                          {% for item in config.twonum %}
                            <div class="input-group input-group-sm mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text lightsheet-input">{{ item.name }}</span>
                              </div>
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number1 }}">
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number2 }}">
                            </div>
                          {% endfor %}
                        {% endif %}
                        {% if config.threenum is not none %}
                          {% for item in config.threenum %}
                            <div class="input-group input-group-sm mb-3">
                              <div class="input-group-prepend">
                                <span class="input-group-text lightsheet-input">{{ item.name }}</span>
                              </div>
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number1 }}">
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number2 }}">
                              <input type="number" class="form-control lightsheet-number" value="{{ item.number3 }}">
                            </div>
                          {% endfor %}
                        {% endif %}
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text lightsheet-input">SegmentFlag</span>
                          </div>
                          <input type="number" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                        </div>
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text lightsheet-input">References</span>
                          </div>
                          <input type="number" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                        </div>
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text lightsheet-input">Dependents</span>
                          </div>
                          <input type="number" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                        </div>
                        <div class="input-group input-group-sm mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text lightsheet-input">Thresholds</span>
                          </div>
                          <input type="number" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                        </div>
                        <div id="camera-fields">
                        </div>
                    {% else %}
                      <p>
                        Pellentesque in ipsum id orci porta dapibus. Donec sollicitudin molestie malesuada. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi. Nulla porttitor accumsan tincidunt. Nulla porttitor accumsan tincidunt. Donec rutrum congue leo eget malesuada. Curabitur non nulla sit amet nisl tempus convallis quis ac lectus. Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Curabitur arcu
                      </p>
                    {% endif %}
                  </div>
                  <div role="tabpanel" class="tab-pane lightsheet-tab" id="sometimes{{ loop.index }}">
                    <!-- For now, show json in sometimes panel -->
                    <fieldset>
                      <textarea {{ pipelineStep.state }} rows="20" cols="50" id={{  pipelineStep.stepName +"_text"}}  name={{ pipelineStep.stepName }}>
                        {{ pipelineStep.inputJson }}
                      </textarea>
                      <br>
                    </fieldset>
                  </div>
                  <!-- rare panel -->
                  <div role="tabpanel" class="tab-pane lightsheet-tab" id="rare{{ loop.index }}">

                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
  <div class="row lightsheet-row">
     <p><input class="btn btn-info" type="submit" name="postJob" value="Submit Job" /></p>
  </div>
{% endblock %}