{% extends "branding.html" %}
{% block content %}
  <div class="row">
    Pipeline steps
    <label for="basic-url">Your vanity URL</label>
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon3">https://example.com/users/</span>
      </div>
      <input type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
    </div>
  </div>
  <!-- Drop down menu to select a previously submitted job -->
  <div class="row">
    <select class="form-control select-job" onchange="location = this.options[this.selectedIndex].value;">
      <option value="http://10.36.13.18:5000/" selected>---Select Previous Run---</option>
      {% if parentServiceData is not none %}
        {% for service in parentServiceData %}
          <option value={{"http://10.36.13.18:5000/"+ service.index }} {{ service.selected }}>  {{ service.creationDate + " " + "(" + service.args[3] + ")"}} </option> 
        {% endfor %}
      {% endif %}
    </select>
  </div>
  <br>
  <br>
  <div class="row">
    <!-- Display step names and parameterization, with checked state determining if the text box is editable -->
    <form action="" method="post">
      {% for pipelineStep in pipelineSteps %}
      <fieldset>
      <legend><input type="checkbox" value={{ pipelineStep.stepName }}+"_checkbox" onclick= {{"document.getElementById('"+ pipelineStep.stepName +"_text').disabled=!this.checked;"}} {{ pipelineStep.checkboxState }}> {{ pipelineStep.stepDescription }} </legend>
      <textarea {{ pipelineStep.state }} rows="20" cols="50" id={{  pipelineStep.stepName +"_text"}}  name={{ pipelineStep.stepName }}>{{ pipelineStep.inputJson }}</textarea><br>
      </fieldset>
      <br>
      {% endfor %}
      <p><input class="btn btn-info" type="submit" name="postJob" value="Submit Job" /></p>
    </form>
  </div>
{% endblock %}