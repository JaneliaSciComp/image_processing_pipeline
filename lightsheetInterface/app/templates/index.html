{% extends "branding.html" %}
{% block content %}
  <div class="row lightsheet-row">
    <h3>Configure Job</h3>
  </div>
  <!-- First row contains dropdown to select one of the previous jobs -->
  <div class="row lightsheet-row">
    <select class="form-control select-job" onchange="location = this.options[this.selectedIndex].value;">
      <option value="http://10.36.13.18:5000/" selected>---Select Previous Run---</option>
      {% if parentServiceData is not none %}
        {% for service in parentServiceData %}
          <option value={{ url_for('index', jacsServiceIndex=service.index) }} {{ service.selected }}>  {{ service.creationDate | strftime + " " + "(" + service.args[3] + ")"}} </option>
        {% endfor %}
      {% endif %}
    </select>
  </div>
  <!-- This row contains the accordeon control which contains the steps -->
  <div class="row lightsheet-row">
    <div id="steps">
      {% if pipelineSteps is not none %}
        {% for pipelineStep in pipelineSteps %}
          {% include "step.html" ignore missing with context %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
  <!-- This row contains the button to submit the forms -->
  <div class="row lightsheet-row">
    <input class="btn btn-info" type="button" name="postJob" value="Submit Job" onclick="ls.processForm()" />
  </div>
  <!-- Custom JavaScript code -->
  <script>
    var ls = ls || {};
    ls.processForm = function() {
      var forms = document.getElementsByClassName('step-form');
      for (var i = 0; i < forms.length; i++) {
        forms[i].submit();
      }
    }
  </script>
{% endblock %}