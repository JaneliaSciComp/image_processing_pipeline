<!-- 
  Contains the template for rendering a parameter, different types of parameter can exist
-->
{% if param.name == key %}
  {% set displayName = param.name %}
  {% set addAttribute = '' %}

  <!-- Set field to read only if ignore flag is set -->
  {% if param.ignore == True %}
      {% set addAttribute = 'ignore readonly' %}
  {% elif param.readonly == True %}
      {% set addAttribute = 'readonly' %}
  {% endif %}

  <!-- Use display name instead of internal name if display name is not empty -->
  {% if param.displayName %}
      {% set displayName = param.displayName %}
  {% endif %}

  {% if value.description is not none %}
    <div class="input-group input-group-sm mb-3" id="{{ step.name }}-{{ param.name }}">
  {% else %}
    <div class="input-group input-group-sm mb-3" id="{{ step.name }}-{{ param.name }}">
  {% endif %}
    <div class="input-group-prepend lightsheet-area" title="{{ value.description }}">
        <span class="input-group-text lightsheet-input" value="">
          {{ displayName| trimend }}
        </span>
        <div class="input-group-prepend lightsheet-fields">
          {% if value.formatting == 'F' %}
            {% if value.boolean == true %}
              <input type="checkbox" class="flag-parameter" {{ addAttribute }} step="any" checked id="{{ param.name }}">
            {% else %}
              <input type="checkbox" class="flag-parameter" {{ addAttribute }} disabled step="any" id="{{ param.name }}">
            {% endif %}
          {% elif value.formatting == 'C' %}
            {% include "multiselect-parameter.html" ignore missing with context %}
          {% elif value.type == 'Text' %}
            <input type="text" class="form-control lightsheet-text" {{ addAttribute }} value="{{ param.text1 }}" id="{{ param.name }}">
          {% elif value.type == 'Number' %}
            {% if value.count == '1' %}
              <input type="number" step="any" class="form-control lightsheet-number" value="{{ param.number1 }}" {{ addAttribute }} id="{{ param.name }}">
            {% elif value.count == '2' %}
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number1 }}" id="{{ param.name }}-0">
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number2 }}" id="{{ param.name }}-1">
            {% elif value.count == '3' %}
              {% if value.formatting == 'R' %}
                <div class="form-group form-inline">
                  <label class="lightsheet-label" for="{{ param.name }}-number1">From: </label>
                  <input type="number" step="any" class="form-control lightsheet-number" id="{{ param.name }}-start" {{ addAttribute }} value="{{ param.number1 }}">
                </div>
                <div class="form-group form-inline">
                  <label class="lightsheet-label" for="{{ param.name }}-number2">To: </label>
                  <input type="number" step="any" class="form-control lightsheet-number" id="{{ param.name }}-end" {{ addAttribute }} value="{{ param.number2 }}">
                </div>
                <div class="form-group form-inline">
                  <label class="lightsheet-label" for="{{ param.name }}-number3">Every:</label>
                  <input type="number" step="any" class="form-control lightsheet-number" id="{{ param.name }}-every" {{ addAttribute }} value="{{ param.number3 }}">
                </div>
              {% else %}
                <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number1 }}" id="{{ param.name }}-0">
                <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number2 }}" id="{{ param.name }}-1">
                <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number3 }}" id="{{ param.name }}-2">
              {% endif %}
            {% elif value.count == '4' %}
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number1 }}" id="{{ param.name }}-0">
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number2 }}" id="{{ param.name }}-1">
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number3 }}" id="{{ param.name }}-2">
              <input type="number" step="any" class="form-control lightsheet-number lightsheet-nested-input" {{ addAttribute }} value="{{ param.number4 }}" id="{{ param.name }}-3">
            {% endif %}
          {% endif %}
          {% if value.empty == True %}
        {% if value.type == 'Text' %}
          <div class="form-check form-check-inline lightsheet-checkbox" title="Pass empty string as field value">
        {% else %}
          <div class="form-check form-check-inline lightsheet-checkbox" title="Pass empty array as field value">
        {% endif %}
          <input class="form-check-input" type="checkbox" id="emptycheckbox_{{step}}-{{param}}" {{ addAttribute }} value="false" onclick="lightsheet.passEmptyField(this)">
          <label class="form-check-label" for="emptycheckbox_{{step}}-{{param}}">Empty Field</label>
        </div>
      {% endif %}
      {% if value.hint %}
          <div class="form-group form-inline hint-area">
            <div class="input-group-sm mb-1">
                <i class="fa fa-info-circle info-icon"></i>
            </div>
            <div class="input-group-sm mb-1 parameter-hint">
              {{ value.hint | safe}}
            </div>
          </div>
       {% endif %}
        </div>
      </div>
    </div>
{% endif %}